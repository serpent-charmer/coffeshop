CREATE TABLE IF NOT EXISTS order_base (
	id integer,
	event_id integer,
	foreign key(event_id) references event(id)
);

-- Registered, Processing, Done, Canceled, Out
CREATE TABLE IF NOT EXISTS event(
	id integer primary key,
	event_type char CHECK( event_type IN ('R', 'P', 'D', 'C', 'O')) NOT NULL DEFAULT 'R',
	employee_id integer,
	event_date date
);

CREATE TABLE IF NOT EXISTS event_registered( 
	event_id integer,
	client_id integer,
	delivery_date date,
	merch_id integer,
	merch_price double,
	foreign key(event_id) references event(id)
);

CREATE TABLE IF NOT EXISTS event_canceled(
	event_id integer,
	reason text,
	foreign key(event_id) references event(id)
);

-- var eid = INSERT INTO event values(19999, now) RETURNING event_id;
-- if event_type == 'R'
-- 	INSERT INTO event_register(eid, 888, now+10, 555, 25.99);
-- if event_type == 'C'
-- 	INSERT INTO event_canceled(eid, 'No money');


